{"ast":null,"code":"import { FormControl, FormsModule, ReactiveFormsModule } from \"@angular/forms\";\nimport { RouterLink } from \"@angular/router\";\nimport { ArticleMetaComponent } from \"../../shared/article-helpers/article-meta.component\";\nimport { AsyncPipe, NgClass, NgForOf, NgIf } from \"@angular/common\";\nimport { FollowButtonComponent } from \"../../shared/buttons/follow-button.component\";\nimport { FavoriteButtonComponent } from \"../../shared/buttons/favorite-button.component\";\nimport { MarkdownPipe } from \"./markdown.pipe\";\nimport { ListErrorsComponent } from \"../../shared/list-errors.component\";\nimport { ArticleCommentComponent } from \"./article-comment.component\";\nimport { catchError, takeUntil } from \"rxjs/operators\";\nimport { Subject, combineLatest, throwError } from \"rxjs\";\nimport { ShowAuthedDirective } from \"../../shared/show-authed.directive\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"../../core/services/articles.service\";\nimport * as i3 from \"../../core/services/comments.service\";\nimport * as i4 from \"../../core/services/user.service\";\nimport * as i5 from \"@angular/forms\";\nconst _c0 = function (a1) {\n  return [\"/editor\", a1];\n};\nconst _c1 = function (a0) {\n  return {\n    disabled: a0\n  };\n};\nfunction ArticleComponent_div_0_span_6_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r10 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"span\")(1, \"a\", 17);\n    i0.ɵɵelement(2, \"i\", 18);\n    i0.ɵɵtext(3, \" Edit Article \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"button\", 19);\n    i0.ɵɵlistener(\"click\", function ArticleComponent_div_0_span_6_Template_button_click_4_listener() {\n      i0.ɵɵrestoreView(_r10);\n      const ctx_r9 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r9.deleteArticle());\n    });\n    i0.ɵɵelement(5, \"i\", 20);\n    i0.ɵɵtext(6, \" Delete Article \");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction1(2, _c0, ctx_r1.article.slug));\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(4, _c1, ctx_r1.isDeleting));\n  }\n}\nfunction ArticleComponent_div_0_span_7_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r12 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"span\")(1, \"app-follow-button\", 21);\n    i0.ɵɵlistener(\"toggle\", function ArticleComponent_div_0_span_7_Template_app_follow_button_toggle_1_listener($event) {\n      i0.ɵɵrestoreView(_r12);\n      const ctx_r11 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r11.toggleFollowing($event));\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(2, \"app-favorite-button\", 22);\n    i0.ɵɵlistener(\"toggle\", function ArticleComponent_div_0_span_7_Template_app_favorite_button_toggle_2_listener($event) {\n      i0.ɵɵrestoreView(_r12);\n      const ctx_r13 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r13.onToggleFavorite($event));\n    });\n    i0.ɵɵtext(3);\n    i0.ɵɵelementStart(4, \"span\", 23);\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"profile\", ctx_r2.article.author);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"article\", ctx_r2.article);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r2.article.favorited ? \"Unfavorite\" : \"Favorite\", \" Article \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"(\", ctx_r2.article.favoritesCount, \")\");\n  }\n}\nfunction ArticleComponent_div_0_li_15_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"li\", 24);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const tag_r14 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", tag_r14, \" \");\n  }\n}\nfunction ArticleComponent_div_0_span_19_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r16 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"span\")(1, \"a\", 17);\n    i0.ɵɵelement(2, \"i\", 18);\n    i0.ɵɵtext(3, \" Edit Article \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"button\", 19);\n    i0.ɵɵlistener(\"click\", function ArticleComponent_div_0_span_19_Template_button_click_4_listener() {\n      i0.ɵɵrestoreView(_r16);\n      const ctx_r15 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r15.deleteArticle());\n    });\n    i0.ɵɵelement(5, \"i\", 20);\n    i0.ɵɵtext(6, \" Delete Article \");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r4 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction1(2, _c0, ctx_r4.article.slug));\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(4, _c1, ctx_r4.isDeleting));\n  }\n}\nfunction ArticleComponent_div_0_span_20_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r18 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"span\")(1, \"app-follow-button\", 21);\n    i0.ɵɵlistener(\"toggle\", function ArticleComponent_div_0_span_20_Template_app_follow_button_toggle_1_listener($event) {\n      i0.ɵɵrestoreView(_r18);\n      const ctx_r17 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r17.toggleFollowing($event));\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(2, \"app-favorite-button\", 22);\n    i0.ɵɵlistener(\"toggle\", function ArticleComponent_div_0_span_20_Template_app_favorite_button_toggle_2_listener($event) {\n      i0.ɵɵrestoreView(_r18);\n      const ctx_r19 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r19.onToggleFavorite($event));\n    });\n    i0.ɵɵtext(3);\n    i0.ɵɵelementStart(4, \"span\", 23);\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r5 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"profile\", ctx_r5.article.author);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"article\", ctx_r5.article);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r5.article.favorited ? \"Unfavorite\" : \"Favorite\", \" Article \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"(\", ctx_r5.article.favoritesCount, \")\");\n  }\n}\nfunction ArticleComponent_div_0_div_23_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r21 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵelement(1, \"app-list-errors\", 25);\n    i0.ɵɵelementStart(2, \"form\", 26);\n    i0.ɵɵlistener(\"ngSubmit\", function ArticleComponent_div_0_div_23_Template_form_ngSubmit_2_listener() {\n      i0.ɵɵrestoreView(_r21);\n      const ctx_r20 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r20.addComment());\n    });\n    i0.ɵɵelementStart(3, \"fieldset\", 27)(4, \"div\", 28);\n    i0.ɵɵelement(5, \"textarea\", 29);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"div\", 30);\n    i0.ɵɵelement(7, \"img\", 31);\n    i0.ɵɵelementStart(8, \"button\", 32);\n    i0.ɵɵtext(9, \" Post Comment \");\n    i0.ɵɵelementEnd()()()()();\n  }\n  if (rf & 2) {\n    const ctx_r6 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"errors\", ctx_r6.commentFormErrors);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"disabled\", ctx_r6.isSubmitting);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"formControl\", ctx_r6.commentControl);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"src\", (ctx_r6.currentUser == null ? null : ctx_r6.currentUser.image) === null ? \"\" : ctx_r6.currentUser == null ? null : ctx_r6.currentUser.image, i0.ɵɵsanitizeUrl);\n  }\n}\nconst _c2 = function () {\n  return [\"/login\"];\n};\nconst _c3 = function () {\n  return [\"/register\"];\n};\nfunction ArticleComponent_div_0_div_24_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"a\", 33);\n    i0.ɵɵtext(2, \"Sign in\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(3, \" or \");\n    i0.ɵɵelementStart(4, \"a\", 33);\n    i0.ɵɵtext(5, \"sign up\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(6, \" to add comments on this article. \");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction0(2, _c2));\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction0(3, _c3));\n  }\n}\nfunction ArticleComponent_div_0_app_article_comment_25_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r24 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"app-article-comment\", 34);\n    i0.ɵɵlistener(\"delete\", function ArticleComponent_div_0_app_article_comment_25_Template_app_article_comment_delete_0_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r24);\n      const comment_r22 = restoredCtx.$implicit;\n      const ctx_r23 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r23.deleteComment(comment_r22));\n    });\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const comment_r22 = ctx.$implicit;\n    i0.ɵɵproperty(\"comment\", comment_r22);\n  }\n}\nfunction ArticleComponent_div_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 1)(1, \"div\", 2)(2, \"div\", 3)(3, \"h1\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"app-article-meta\", 4);\n    i0.ɵɵtemplate(6, ArticleComponent_div_0_span_6_Template, 7, 6, \"span\", 5);\n    i0.ɵɵtemplate(7, ArticleComponent_div_0_span_7_Template, 6, 4, \"span\", 5);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(8, \"div\", 6)(9, \"div\", 7)(10, \"div\", 8);\n    i0.ɵɵelement(11, \"div\", 9);\n    i0.ɵɵpipe(12, \"async\");\n    i0.ɵɵpipe(13, \"markdown\");\n    i0.ɵɵelementStart(14, \"ul\", 10);\n    i0.ɵɵtemplate(15, ArticleComponent_div_0_li_15_Template, 2, 1, \"li\", 11);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelement(16, \"hr\");\n    i0.ɵɵelementStart(17, \"div\", 12)(18, \"app-article-meta\", 4);\n    i0.ɵɵtemplate(19, ArticleComponent_div_0_span_19_Template, 7, 6, \"span\", 5);\n    i0.ɵɵtemplate(20, ArticleComponent_div_0_span_20_Template, 6, 4, \"span\", 5);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(21, \"div\", 13)(22, \"div\", 14);\n    i0.ɵɵtemplate(23, ArticleComponent_div_0_div_23_Template, 10, 4, \"div\", 15);\n    i0.ɵɵtemplate(24, ArticleComponent_div_0_div_24_Template, 7, 4, \"div\", 15);\n    i0.ɵɵtemplate(25, ArticleComponent_div_0_app_article_comment_25_Template, 1, 1, \"app-article-comment\", 16);\n    i0.ɵɵelementEnd()()()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(ctx_r0.article.title);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"article\", ctx_r0.article);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.canModify);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r0.canModify);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"innerHTML\", i0.ɵɵpipeBind1(12, 13, i0.ɵɵpipeBind1(13, 15, ctx_r0.article.body)), i0.ɵɵsanitizeHtml);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.article.tagList);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"article\", ctx_r0.article);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.canModify);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r0.canModify);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"appShowAuthed\", true);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"appShowAuthed\", false);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.comments)(\"ngForTrackBy\", ctx_r0.trackById);\n  }\n}\nexport class ArticleComponent {\n  constructor(route, articleService, commentsService, router, userService) {\n    this.route = route;\n    this.articleService = articleService;\n    this.commentsService = commentsService;\n    this.router = router;\n    this.userService = userService;\n    this.comments = [];\n    this.canModify = false;\n    this.commentControl = new FormControl(\"\", {\n      nonNullable: true\n    });\n    this.commentFormErrors = null;\n    this.isSubmitting = false;\n    this.isDeleting = false;\n    this.destroy$ = new Subject();\n  }\n  ngOnInit() {\n    const slug = this.route.snapshot.params[\"slug\"];\n    combineLatest([this.articleService.get(slug), this.commentsService.getAll(slug), this.userService.currentUser]).pipe(catchError(err => {\n      void this.router.navigate([\"/\"]);\n      return throwError(() => err);\n    })).subscribe(([article, comments, currentUser]) => {\n      this.article = article;\n      this.comments = comments;\n      this.currentUser = currentUser;\n      this.canModify = currentUser?.username === article.author.username;\n    });\n  }\n  ngOnDestroy() {\n    this.destroy$.next();\n    this.destroy$.complete();\n  }\n  onToggleFavorite(favorited) {\n    this.article.favorited = favorited;\n    if (favorited) {\n      this.article.favoritesCount++;\n    } else {\n      this.article.favoritesCount--;\n    }\n  }\n  toggleFollowing(profile) {\n    this.article.author.following = profile.following;\n  }\n  deleteArticle() {\n    this.isDeleting = true;\n    this.articleService.delete(this.article.slug).pipe(takeUntil(this.destroy$)).subscribe(() => {\n      void this.router.navigate([\"/\"]);\n    });\n  }\n  addComment() {\n    this.isSubmitting = true;\n    this.commentFormErrors = null;\n    this.commentsService.add(this.article.slug, this.commentControl.value).pipe(takeUntil(this.destroy$)).subscribe({\n      next: comment => {\n        this.comments.unshift(comment);\n        this.commentControl.reset(\"\");\n        this.isSubmitting = false;\n      },\n      error: errors => {\n        this.isSubmitting = false;\n        this.commentFormErrors = errors;\n      }\n    });\n  }\n  deleteComment(comment) {\n    this.commentsService.delete(comment.id, this.article.slug).pipe(takeUntil(this.destroy$)).subscribe(() => {\n      this.comments = this.comments.filter(item => item !== comment);\n    });\n  }\n  trackById(index, item) {\n    return item.id;\n  }\n  static #_ = this.ɵfac = function ArticleComponent_Factory(t) {\n    return new (t || ArticleComponent)(i0.ɵɵdirectiveInject(i1.ActivatedRoute), i0.ɵɵdirectiveInject(i2.ArticlesService), i0.ɵɵdirectiveInject(i3.CommentsService), i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i4.UserService));\n  };\n  static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: ArticleComponent,\n    selectors: [[\"app-article-page\"]],\n    standalone: true,\n    features: [i0.ɵɵStandaloneFeature],\n    decls: 1,\n    vars: 1,\n    consts: [[\"class\", \"article-page\", 4, \"ngIf\"], [1, \"article-page\"], [1, \"banner\"], [1, \"container\"], [3, \"article\"], [4, \"ngIf\"], [1, \"container\", \"page\"], [1, \"row\", \"article-content\"], [1, \"col-md-12\"], [3, \"innerHTML\"], [1, \"tag-list\"], [\"class\", \"tag-default tag-pill tag-outline\", 4, \"ngFor\", \"ngForOf\"], [1, \"article-actions\"], [1, \"row\"], [1, \"col-xs-12\", \"col-md-8\", \"offset-md-2\"], [4, \"appShowAuthed\"], [3, \"comment\", \"delete\", 4, \"ngFor\", \"ngForOf\", \"ngForTrackBy\"], [1, \"btn\", \"btn-sm\", \"btn-outline-secondary\", 3, \"routerLink\"], [1, \"ion-edit\"], [1, \"btn\", \"btn-sm\", \"btn-outline-danger\", 3, \"ngClass\", \"click\"], [1, \"ion-trash-a\"], [3, \"profile\", \"toggle\"], [3, \"article\", \"toggle\"], [1, \"counter\"], [1, \"tag-default\", \"tag-pill\", \"tag-outline\"], [3, \"errors\"], [1, \"card\", \"comment-form\", 3, \"ngSubmit\"], [3, \"disabled\"], [1, \"card-block\"], [\"placeholder\", \"Write a comment...\", \"rows\", \"3\", 1, \"form-control\", 3, \"formControl\"], [1, \"card-footer\"], [1, \"comment-author-img\", 3, \"src\"], [\"type\", \"submit\", 1, \"btn\", \"btn-sm\", \"btn-primary\"], [3, \"routerLink\"], [3, \"comment\", \"delete\"]],\n    template: function ArticleComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵtemplate(0, ArticleComponent_div_0_Template, 26, 17, \"div\", 0);\n      }\n      if (rf & 2) {\n        i0.ɵɵproperty(\"ngIf\", ctx.article);\n      }\n    },\n    dependencies: [ArticleMetaComponent, RouterLink, NgClass, FollowButtonComponent, FavoriteButtonComponent, NgForOf, MarkdownPipe, AsyncPipe, ListErrorsComponent, FormsModule, i5.ɵNgNoValidate, i5.DefaultValueAccessor, i5.NgControlStatus, i5.NgControlStatusGroup, i5.NgForm, ArticleCommentComponent, ReactiveFormsModule, i5.FormControlDirective, ShowAuthedDirective, NgIf],\n    encapsulation: 2\n  });\n}","map":{"version":3,"names":["FormControl","FormsModule","ReactiveFormsModule","RouterLink","ArticleMetaComponent","AsyncPipe","NgClass","NgForOf","NgIf","FollowButtonComponent","FavoriteButtonComponent","MarkdownPipe","ListErrorsComponent","ArticleCommentComponent","catchError","takeUntil","Subject","combineLatest","throwError","ShowAuthedDirective","i0","ɵɵelementStart","ɵɵelement","ɵɵtext","ɵɵelementEnd","ɵɵlistener","ArticleComponent_div_0_span_6_Template_button_click_4_listener","ɵɵrestoreView","_r10","ctx_r9","ɵɵnextContext","ɵɵresetView","deleteArticle","ɵɵadvance","ɵɵproperty","ɵɵpureFunction1","_c0","ctx_r1","article","slug","_c1","isDeleting","ArticleComponent_div_0_span_7_Template_app_follow_button_toggle_1_listener","$event","_r12","ctx_r11","toggleFollowing","ArticleComponent_div_0_span_7_Template_app_favorite_button_toggle_2_listener","ctx_r13","onToggleFavorite","ctx_r2","author","ɵɵtextInterpolate1","favorited","favoritesCount","tag_r14","ArticleComponent_div_0_span_19_Template_button_click_4_listener","_r16","ctx_r15","ctx_r4","ArticleComponent_div_0_span_20_Template_app_follow_button_toggle_1_listener","_r18","ctx_r17","ArticleComponent_div_0_span_20_Template_app_favorite_button_toggle_2_listener","ctx_r19","ctx_r5","ArticleComponent_div_0_div_23_Template_form_ngSubmit_2_listener","_r21","ctx_r20","addComment","ctx_r6","commentFormErrors","isSubmitting","commentControl","currentUser","image","ɵɵsanitizeUrl","ɵɵpureFunction0","_c2","_c3","ArticleComponent_div_0_app_article_comment_25_Template_app_article_comment_delete_0_listener","restoredCtx","_r24","comment_r22","$implicit","ctx_r23","deleteComment","ɵɵtemplate","ArticleComponent_div_0_span_6_Template","ArticleComponent_div_0_span_7_Template","ArticleComponent_div_0_li_15_Template","ArticleComponent_div_0_span_19_Template","ArticleComponent_div_0_span_20_Template","ArticleComponent_div_0_div_23_Template","ArticleComponent_div_0_div_24_Template","ArticleComponent_div_0_app_article_comment_25_Template","ɵɵtextInterpolate","ctx_r0","title","canModify","ɵɵpipeBind1","body","ɵɵsanitizeHtml","tagList","comments","trackById","ArticleComponent","constructor","route","articleService","commentsService","router","userService","nonNullable","destroy$","ngOnInit","snapshot","params","get","getAll","pipe","err","navigate","subscribe","username","ngOnDestroy","next","complete","profile","following","delete","add","value","comment","unshift","reset","error","errors","id","filter","item","index","_","ɵɵdirectiveInject","i1","ActivatedRoute","i2","ArticlesService","i3","CommentsService","Router","i4","UserService","_2","selectors","standalone","features","ɵɵStandaloneFeature","decls","vars","consts","template","ArticleComponent_Template","rf","ctx","ArticleComponent_div_0_Template","i5","ɵNgNoValidate","DefaultValueAccessor","NgControlStatus","NgControlStatusGroup","NgForm","FormControlDirective","encapsulation"],"sources":["C:\\Users\\javie\\KarateGit\\myproject\\src\\app\\features\\article\\article.component.ts","C:\\Users\\javie\\KarateGit\\myproject\\src\\app\\features\\article\\article.component.html"],"sourcesContent":["import { Component, OnDestroy, OnInit } from \"@angular/core\";\r\nimport { FormControl, FormsModule, ReactiveFormsModule } from \"@angular/forms\";\r\nimport { ActivatedRoute, Router, RouterLink } from \"@angular/router\";\r\nimport { User } from \"../../core/models/user.model\";\r\nimport { Article } from \"../../core/models/article.model\";\r\nimport { ArticlesService } from \"../../core/services/articles.service\";\r\nimport { CommentsService } from \"../../core/services/comments.service\";\r\nimport { UserService } from \"../../core/services/user.service\";\r\nimport { ArticleMetaComponent } from \"../../shared/article-helpers/article-meta.component\";\r\nimport { AsyncPipe, NgClass, NgForOf, NgIf } from \"@angular/common\";\r\nimport { FollowButtonComponent } from \"../../shared/buttons/follow-button.component\";\r\nimport { FavoriteButtonComponent } from \"../../shared/buttons/favorite-button.component\";\r\nimport { MarkdownPipe } from \"./markdown.pipe\";\r\nimport { ListErrorsComponent } from \"../../shared/list-errors.component\";\r\nimport { ArticleCommentComponent } from \"./article-comment.component\";\r\nimport { catchError, takeUntil } from \"rxjs/operators\";\r\nimport { Subject, combineLatest, throwError } from \"rxjs\";\r\nimport { Comment } from \"../../core/models/comment.model\";\r\nimport { ShowAuthedDirective } from \"../../shared/show-authed.directive\";\r\nimport { Errors } from \"../../core/models/errors.model\";\r\nimport { Profile } from \"../../core/models/profile.model\";\r\n\r\n@Component({\r\n  selector: \"app-article-page\",\r\n  templateUrl: \"./article.component.html\",\r\n  imports: [\r\n    ArticleMetaComponent,\r\n    RouterLink,\r\n    NgClass,\r\n    FollowButtonComponent,\r\n    FavoriteButtonComponent,\r\n    NgForOf,\r\n    MarkdownPipe,\r\n    AsyncPipe,\r\n    ListErrorsComponent,\r\n    FormsModule,\r\n    ArticleCommentComponent,\r\n    ReactiveFormsModule,\r\n    ShowAuthedDirective,\r\n    NgIf,\r\n  ],\r\n  standalone: true,\r\n})\r\nexport class ArticleComponent implements OnInit, OnDestroy {\r\n  article!: Article;\r\n  currentUser!: User | null;\r\n  comments: Comment[] = [];\r\n  canModify: boolean = false;\r\n\r\n  commentControl = new FormControl<string>(\"\", { nonNullable: true });\r\n  commentFormErrors: Errors | null = null;\r\n\r\n  isSubmitting = false;\r\n  isDeleting = false;\r\n  destroy$ = new Subject<void>();\r\n\r\n  constructor(\r\n    private readonly route: ActivatedRoute,\r\n    private readonly articleService: ArticlesService,\r\n    private readonly commentsService: CommentsService,\r\n    private readonly router: Router,\r\n    private readonly userService: UserService\r\n  ) {}\r\n\r\n  ngOnInit(): void {\r\n    const slug = this.route.snapshot.params[\"slug\"];\r\n    combineLatest([\r\n      this.articleService.get(slug),\r\n      this.commentsService.getAll(slug),\r\n      this.userService.currentUser,\r\n    ])\r\n      .pipe(\r\n        catchError((err) => {\r\n          void this.router.navigate([\"/\"]);\r\n          return throwError(() => err);\r\n        })\r\n      )\r\n      .subscribe(([article, comments, currentUser]) => {\r\n        this.article = article;\r\n        this.comments = comments;\r\n        this.currentUser = currentUser;\r\n        this.canModify = currentUser?.username === article.author.username;\r\n      });\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    this.destroy$.next();\r\n    this.destroy$.complete();\r\n  }\r\n\r\n  onToggleFavorite(favorited: boolean): void {\r\n    this.article.favorited = favorited;\r\n\r\n    if (favorited) {\r\n      this.article.favoritesCount++;\r\n    } else {\r\n      this.article.favoritesCount--;\r\n    }\r\n  }\r\n\r\n  toggleFollowing(profile: Profile): void {\r\n    this.article.author.following = profile.following;\r\n  }\r\n\r\n  deleteArticle(): void {\r\n    this.isDeleting = true;\r\n\r\n    this.articleService\r\n      .delete(this.article.slug)\r\n      .pipe(takeUntil(this.destroy$))\r\n      .subscribe(() => {\r\n        void this.router.navigate([\"/\"]);\r\n      });\r\n  }\r\n\r\n  addComment() {\r\n    this.isSubmitting = true;\r\n    this.commentFormErrors = null;\r\n\r\n    this.commentsService\r\n      .add(this.article.slug, this.commentControl.value)\r\n      .pipe(takeUntil(this.destroy$))\r\n      .subscribe({\r\n        next: (comment) => {\r\n          this.comments.unshift(comment);\r\n          this.commentControl.reset(\"\");\r\n          this.isSubmitting = false;\r\n        },\r\n        error: (errors) => {\r\n          this.isSubmitting = false;\r\n          this.commentFormErrors = errors;\r\n        },\r\n      });\r\n  }\r\n\r\n  deleteComment(comment: Comment): void {\r\n    this.commentsService\r\n      .delete(comment.id, this.article.slug)\r\n      .pipe(takeUntil(this.destroy$))\r\n      .subscribe(() => {\r\n        this.comments = this.comments.filter((item) => item !== comment);\r\n      });\r\n  }\r\n\r\n  trackById(index: number, item: Comment): string {\r\n    return item.id;\r\n  }\r\n}\r\n","<div class=\"article-page\" *ngIf=\"article\">\r\n  <div class=\"banner\">\r\n    <div class=\"container\">\r\n      <h1>{{ article.title }}</h1>\r\n\r\n      <app-article-meta [article]=\"article\">\r\n        <span *ngIf=\"canModify\">\r\n          <a\r\n            class=\"btn btn-sm btn-outline-secondary\"\r\n            [routerLink]=\"['/editor', article.slug]\"\r\n          >\r\n            <i class=\"ion-edit\"></i> Edit Article\r\n          </a>\r\n\r\n          <button\r\n            class=\"btn btn-sm btn-outline-danger\"\r\n            [ngClass]=\"{ disabled: isDeleting }\"\r\n            (click)=\"deleteArticle()\"\r\n          >\r\n            <i class=\"ion-trash-a\"></i> Delete Article\r\n          </button>\r\n        </span>\r\n\r\n        <span *ngIf=\"!canModify\">\r\n          <app-follow-button\r\n            [profile]=\"article.author\"\r\n            (toggle)=\"toggleFollowing($event)\"\r\n          >\r\n          </app-follow-button>\r\n\r\n          <app-favorite-button\r\n            [article]=\"article\"\r\n            (toggle)=\"onToggleFavorite($event)\"\r\n          >\r\n            {{ article.favorited ? \"Unfavorite\" : \"Favorite\" }} Article\r\n            <span class=\"counter\">({{ article.favoritesCount }})</span>\r\n          </app-favorite-button>\r\n        </span>\r\n      </app-article-meta>\r\n    </div>\r\n  </div>\r\n\r\n  <div class=\"container page\">\r\n    <div class=\"row article-content\">\r\n      <div class=\"col-md-12\">\r\n        <div [innerHTML]=\"article.body | markdown | async\"></div>\r\n\r\n        <ul class=\"tag-list\">\r\n          <li\r\n            *ngFor=\"let tag of article.tagList\"\r\n            class=\"tag-default tag-pill tag-outline\"\r\n          >\r\n            {{ tag }}\r\n          </li>\r\n        </ul>\r\n      </div>\r\n    </div>\r\n\r\n    <hr />\r\n\r\n    <div class=\"article-actions\">\r\n      <app-article-meta [article]=\"article\">\r\n        <span *ngIf=\"canModify\">\r\n          <a\r\n            class=\"btn btn-sm btn-outline-secondary\"\r\n            [routerLink]=\"['/editor', article.slug]\"\r\n          >\r\n            <i class=\"ion-edit\"></i> Edit Article\r\n          </a>\r\n\r\n          <button\r\n            class=\"btn btn-sm btn-outline-danger\"\r\n            [ngClass]=\"{ disabled: isDeleting }\"\r\n            (click)=\"deleteArticle()\"\r\n          >\r\n            <i class=\"ion-trash-a\"></i> Delete Article\r\n          </button>\r\n        </span>\r\n\r\n        <span *ngIf=\"!canModify\">\r\n          <app-follow-button\r\n            [profile]=\"article.author\"\r\n            (toggle)=\"toggleFollowing($event)\"\r\n          >\r\n          </app-follow-button>\r\n\r\n          <app-favorite-button\r\n            [article]=\"article\"\r\n            (toggle)=\"onToggleFavorite($event)\"\r\n          >\r\n            {{ article.favorited ? \"Unfavorite\" : \"Favorite\" }} Article\r\n            <span class=\"counter\">({{ article.favoritesCount }})</span>\r\n          </app-favorite-button>\r\n        </span>\r\n      </app-article-meta>\r\n    </div>\r\n\r\n    <div class=\"row\">\r\n      <div class=\"col-xs-12 col-md-8 offset-md-2\">\r\n        <div *appShowAuthed=\"true\">\r\n          <app-list-errors [errors]=\"commentFormErrors\"></app-list-errors>\r\n          <form class=\"card comment-form\" (ngSubmit)=\"addComment()\">\r\n            <fieldset [disabled]=\"isSubmitting\">\r\n              <div class=\"card-block\">\r\n                <textarea\r\n                  class=\"form-control\"\r\n                  placeholder=\"Write a comment...\"\r\n                  rows=\"3\"\r\n                  [formControl]=\"commentControl\"\r\n                ></textarea>\r\n              </div>\r\n              <div class=\"card-footer\">\r\n                <img\r\n                  [src]=\"currentUser?.image === null ? '' : currentUser?.image\"\r\n                  class=\"comment-author-img\"\r\n                />\r\n                <button class=\"btn btn-sm btn-primary\" type=\"submit\">\r\n                  Post Comment\r\n                </button>\r\n              </div>\r\n            </fieldset>\r\n          </form>\r\n        </div>\r\n\r\n        <div *appShowAuthed=\"false\">\r\n          <a [routerLink]=\"['/login']\">Sign in</a> or\r\n          <a [routerLink]=\"['/register']\">sign up</a> to add comments on this\r\n          article.\r\n        </div>\r\n\r\n        <app-article-comment\r\n          *ngFor=\"let comment of comments; trackBy: trackById\"\r\n          [comment]=\"comment\"\r\n          (delete)=\"deleteComment(comment)\"\r\n        >\r\n        </app-article-comment>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}