{"ast":null,"code":"import { ArticlePreviewComponent } from \"./article-preview.component\";\nimport { NgClass, NgForOf, NgIf } from \"@angular/common\";\nimport { LoadingState } from \"../../core/models/loading-state.model\";\nimport { Subject } from \"rxjs\";\nimport { takeUntil } from \"rxjs/operators\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../core/services/articles.service\";\nfunction ArticleListComponent_app_article_preview_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"app-article-preview\", 3);\n  }\n  if (rf & 2) {\n    const article_r4 = ctx.$implicit;\n    i0.ɵɵproperty(\"article\", article_r4);\n  }\n}\nfunction ArticleListComponent_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 4);\n    i0.ɵɵtext(1, \" Loading articles...\\n\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ArticleListComponent_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 4);\n    i0.ɵɵtext(1, \" No articles are here... yet.\\n\");\n    i0.ɵɵelementEnd();\n  }\n}\nconst _c0 = function (a0) {\n  return {\n    active: a0\n  };\n};\nfunction ArticleListComponent_nav_3_li_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r8 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"li\", 7)(1, \"button\", 8);\n    i0.ɵɵlistener(\"click\", function ArticleListComponent_nav_3_li_2_Template_button_click_1_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r8);\n      const pageNumber_r6 = restoredCtx.$implicit;\n      const ctx_r7 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r7.setPageTo(pageNumber_r6));\n    });\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const pageNumber_r6 = ctx.$implicit;\n    const ctx_r5 = i0.ɵɵnextContext(2);\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(2, _c0, pageNumber_r6 === ctx_r5.currentPage));\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", pageNumber_r6, \" \");\n  }\n}\nfunction ArticleListComponent_nav_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"nav\")(1, \"ul\", 5);\n    i0.ɵɵtemplate(2, ArticleListComponent_nav_3_li_2_Template, 3, 4, \"li\", 6);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r3.totalPages);\n  }\n}\nexport class ArticleListComponent {\n  set config(config) {\n    if (config) {\n      this.query = config;\n      this.currentPage = 1;\n      this.runQuery();\n    }\n  }\n  constructor(articlesService) {\n    this.articlesService = articlesService;\n    this.results = [];\n    this.currentPage = 1;\n    this.totalPages = [];\n    this.loading = LoadingState.NOT_LOADED;\n    this.LoadingState = LoadingState;\n    this.destroy$ = new Subject();\n  }\n  ngOnDestroy() {\n    this.destroy$.next();\n    this.destroy$.complete();\n  }\n  setPageTo(pageNumber) {\n    this.currentPage = pageNumber;\n    this.runQuery();\n  }\n  runQuery() {\n    this.loading = LoadingState.LOADING;\n    this.results = [];\n    // Create limit and offset filter (if necessary)\n    if (this.limit) {\n      this.query.filters.limit = this.limit;\n      this.query.filters.offset = this.limit * (this.currentPage - 1);\n    }\n    this.articlesService.query(this.query).pipe(takeUntil(this.destroy$)).subscribe(data => {\n      this.loading = LoadingState.LOADED;\n      this.results = data.articles;\n      // Used from http://www.jstips.co/en/create-range-0...n-easily-using-one-line/\n      this.totalPages = Array.from(new Array(Math.ceil(data.articlesCount / this.limit)), (val, index) => index + 1);\n    });\n  }\n  static #_ = this.ɵfac = function ArticleListComponent_Factory(t) {\n    return new (t || ArticleListComponent)(i0.ɵɵdirectiveInject(i1.ArticlesService));\n  };\n  static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: ArticleListComponent,\n    selectors: [[\"app-article-list\"]],\n    inputs: {\n      limit: \"limit\",\n      config: \"config\"\n    },\n    standalone: true,\n    features: [i0.ɵɵStandaloneFeature],\n    decls: 4,\n    vars: 4,\n    consts: [[3, \"article\", 4, \"ngFor\", \"ngForOf\"], [\"class\", \"article-preview\", 4, \"ngIf\"], [4, \"ngIf\"], [3, \"article\"], [1, \"article-preview\"], [1, \"pagination\"], [\"class\", \"page-item\", 3, \"ngClass\", 4, \"ngFor\", \"ngForOf\"], [1, \"page-item\", 3, \"ngClass\"], [1, \"page-link\", 3, \"click\"]],\n    template: function ArticleListComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵtemplate(0, ArticleListComponent_app_article_preview_0_Template, 1, 1, \"app-article-preview\", 0);\n        i0.ɵɵtemplate(1, ArticleListComponent_div_1_Template, 2, 0, \"div\", 1);\n        i0.ɵɵtemplate(2, ArticleListComponent_div_2_Template, 2, 0, \"div\", 1);\n        i0.ɵɵtemplate(3, ArticleListComponent_nav_3_Template, 3, 1, \"nav\", 2);\n      }\n      if (rf & 2) {\n        i0.ɵɵproperty(\"ngForOf\", ctx.results);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.loading === ctx.LoadingState.LOADING);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.loading === ctx.LoadingState.LOADED && !ctx.results.length);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.loading === ctx.LoadingState.LOADED && ctx.totalPages.length > 1);\n      }\n    },\n    dependencies: [ArticlePreviewComponent, NgForOf, NgClass, NgIf],\n    styles: [\".page-link[_ngcontent-%COMP%] {\\n  cursor: pointer;\\n}\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFydGljbGUtbGlzdC5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0UsZUFBZTtBQUNqQiIsImZpbGUiOiJhcnRpY2xlLWxpc3QuY29tcG9uZW50LmNzcyIsInNvdXJjZXNDb250ZW50IjpbIi5wYWdlLWxpbmsge1xyXG4gIGN1cnNvcjogcG9pbnRlcjtcclxufVxyXG4iXX0= */\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvc2hhcmVkL2FydGljbGUtaGVscGVycy9hcnRpY2xlLWxpc3QuY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLGVBQWU7QUFDakI7O0FBRUEsZ1VBQWdVIiwic291cmNlc0NvbnRlbnQiOlsiLnBhZ2UtbGluayB7XHJcbiAgY3Vyc29yOiBwb2ludGVyO1xyXG59XHJcbiJdLCJzb3VyY2VSb290IjoiIn0= */\"]\n  });\n}","map":{"version":3,"names":["ArticlePreviewComponent","NgClass","NgForOf","NgIf","LoadingState","Subject","takeUntil","i0","ɵɵelement","ɵɵproperty","article_r4","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵlistener","ArticleListComponent_nav_3_li_2_Template_button_click_1_listener","restoredCtx","ɵɵrestoreView","_r8","pageNumber_r6","$implicit","ctx_r7","ɵɵnextContext","ɵɵresetView","setPageTo","ɵɵpureFunction1","_c0","ctx_r5","currentPage","ɵɵadvance","ɵɵtextInterpolate1","ɵɵtemplate","ArticleListComponent_nav_3_li_2_Template","ctx_r3","totalPages","ArticleListComponent","config","query","runQuery","constructor","articlesService","results","loading","NOT_LOADED","destroy$","ngOnDestroy","next","complete","pageNumber","LOADING","limit","filters","offset","pipe","subscribe","data","LOADED","articles","Array","from","Math","ceil","articlesCount","val","index","_","ɵɵdirectiveInject","i1","ArticlesService","_2","selectors","inputs","standalone","features","ɵɵStandaloneFeature","decls","vars","consts","template","ArticleListComponent_Template","rf","ctx","ArticleListComponent_app_article_preview_0_Template","ArticleListComponent_div_1_Template","ArticleListComponent_div_2_Template","ArticleListComponent_nav_3_Template","length","styles"],"sources":["C:\\Users\\javie\\KarateGit\\myproject\\src\\app\\shared\\article-helpers\\article-list.component.ts","C:\\Users\\javie\\KarateGit\\myproject\\src\\app\\shared\\article-helpers\\article-list.component.html"],"sourcesContent":["import { Component, Input, OnDestroy } from \"@angular/core\";\r\nimport { ArticlesService } from \"../../core/services/articles.service\";\r\nimport { ArticleListConfig } from \"../../core/models/article-list-config.model\";\r\nimport { Article } from \"../../core/models/article.model\";\r\nimport { ArticlePreviewComponent } from \"./article-preview.component\";\r\nimport { NgClass, NgForOf, NgIf } from \"@angular/common\";\r\nimport { LoadingState } from \"../../core/models/loading-state.model\";\r\nimport { Subject } from \"rxjs\";\r\nimport { takeUntil } from \"rxjs/operators\";\r\n\r\n@Component({\r\n  selector: \"app-article-list\",\r\n  styleUrls: [\"article-list.component.css\"],\r\n  templateUrl: \"./article-list.component.html\",\r\n  imports: [ArticlePreviewComponent, NgForOf, NgClass, NgIf],\r\n  standalone: true,\r\n})\r\nexport class ArticleListComponent implements OnDestroy {\r\n  query!: ArticleListConfig;\r\n  results: Article[] = [];\r\n  currentPage = 1;\r\n  totalPages: Array<number> = [];\r\n  loading = LoadingState.NOT_LOADED;\r\n  LoadingState = LoadingState;\r\n  destroy$ = new Subject<void>();\r\n\r\n  @Input() limit!: number;\r\n  @Input()\r\n  set config(config: ArticleListConfig) {\r\n    if (config) {\r\n      this.query = config;\r\n      this.currentPage = 1;\r\n      this.runQuery();\r\n    }\r\n  }\r\n\r\n  constructor(private articlesService: ArticlesService) {}\r\n\r\n  ngOnDestroy() {\r\n    this.destroy$.next();\r\n    this.destroy$.complete();\r\n  }\r\n\r\n  setPageTo(pageNumber: number) {\r\n    this.currentPage = pageNumber;\r\n    this.runQuery();\r\n  }\r\n\r\n  runQuery() {\r\n    this.loading = LoadingState.LOADING;\r\n    this.results = [];\r\n\r\n    // Create limit and offset filter (if necessary)\r\n    if (this.limit) {\r\n      this.query.filters.limit = this.limit;\r\n      this.query.filters.offset = this.limit * (this.currentPage - 1);\r\n    }\r\n\r\n    this.articlesService\r\n      .query(this.query)\r\n      .pipe(takeUntil(this.destroy$))\r\n      .subscribe((data) => {\r\n        this.loading = LoadingState.LOADED;\r\n        this.results = data.articles;\r\n\r\n        // Used from http://www.jstips.co/en/create-range-0...n-easily-using-one-line/\r\n        this.totalPages = Array.from(\r\n          new Array(Math.ceil(data.articlesCount / this.limit)),\r\n          (val, index) => index + 1\r\n        );\r\n      });\r\n  }\r\n}\r\n","<app-article-preview *ngFor=\"let article of results\" [article]=\"article\">\r\n</app-article-preview>\r\n\r\n<div class=\"article-preview\" *ngIf=\"loading === LoadingState.LOADING\">\r\n  Loading articles...\r\n</div>\r\n\r\n<div\r\n  class=\"article-preview\"\r\n  *ngIf=\"loading === LoadingState.LOADED && !results.length\"\r\n>\r\n  No articles are here... yet.\r\n</div>\r\n\r\n<nav *ngIf=\"loading === LoadingState.LOADED && totalPages.length > 1\">\r\n  <ul class=\"pagination\">\r\n    <li\r\n      class=\"page-item\"\r\n      [ngClass]=\"{ active: pageNumber === currentPage }\"\r\n      *ngFor=\"let pageNumber of totalPages\"\r\n    >\r\n      <button class=\"page-link\" (click)=\"setPageTo(pageNumber)\">\r\n        {{ pageNumber }}\r\n      </button>\r\n    </li>\r\n  </ul>\r\n</nav>\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}